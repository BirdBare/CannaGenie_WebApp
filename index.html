<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="jquery.caret.js"></script>
<script src="jquery.tag-editor.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link href="jquery.tag-editor.css" rel="stylesheet" type="text/css" media="all">
<link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet'>



<style>

body
{
position:relative;
margin: 0;
z-index:-1;
  min-Width:800px;
}
body::after
{
background: url("images/background_copy.jpg");
background-repeat: no-repeat;
background-size:cover;
content:'';
position:absolute;
top: 0;
bottom: 0;
right: 0;
left: 0;
z-index:-2;
}

#websiteArea
{
  position:relative;
  min-height:100%;
}

#header
{
position:relative;
height:150px;
}
#icon
{
float:right;
top:20px;
left:885px;
cursor:pointer;
margin-top: 20px;
margin-right: 20px;
}

#name
{
font-size:75px;
font-family:'Lobster';
color:#336600;
}
#slogan
{
font-size:16px;
color:#336600;
}
#searchArea
{
width:400px;
position:relative;
}
#input+.tag-editor
{
position:absolute;
width:400px;
z-index:0;
border:2px solid black;
}
#help
{
position:absolute;
color:black;
left:382px;
height:22px;
width:27px;
z-index:1;
font-size:25px;
cursor:pointer;
}

#submit
{
position:absolute;
left:410px;
height:30;
width:60;
z-index:1;
cursor:pointer;
}

#footer
{
  position:absolute;
  width:100%;
  bottom:0;
}
#linkArea
{
  position:relative;
}
.rightLink
{
  float:right;
  margin-left:120px;
  margin-right:15px;
  margin-bottom:10px;
  cursor:pointer;
  text-decoration:underline;
  color:black;
}
.leftLink
{
  float:left;
  margin-right:120px;
  margin-left:15px;
  margin-bottom:10px;
  cursor:pointer;
  text-decoration:underline;
  color:black;
}
#annoucement
{
position:relative;
border-style:solid;
}

</style>

<body>
<div id="websiteArea">
    <center>
  <div id="header">
    <img id="icon" src="images/logo/user.png">
  </div>

  <div id="body">
    <div id="logoArea">
      <div id="name">
        Cannagenie
      </div>
      <div id="slogan">
        Your Personalized Strain Finder
      </div>
      <br>
      <br>
    </div>
    <div id="searchArea">
      <input type="text" name="input" id="input"> 
      <div id="help">?</div>
      <img id="submit" src="images/logo/submit.png">
    </div>
  </div>

  <div id="footer">
    <div id="linkArea">
      <div id="socialMedia" class="leftLink link">
        Social Media
      </div>
      <div id="mission" class="leftLink link">
        Mission
      </div>
      <div id="technology" class="rightLink link">
        Technology
      </div>
      <div id="aboutUs"class="rightLink link">
        About us
      <div style="clear:both;"></div>
      </div>
    <div>
      <div id="announcement">
      </div>
  </div>
    </center>
</div>
</body>

<script>
$("#icon").click(function()
{
});
$("#help").click(function()
{
});

$("#submit").click(function()
{
var search = document.getElementById("input").value;

  if(search.length == 0)
  {
    //go to strain of the day
  }
  else
  {
    getValues();
  }
});

$(".link").click(function() { window.location = this.id + ".html"; });
</script>

<script>
  var socket = io();
  var socketId = "";

/*
--------------------------------------------
            Functions
--------------------------------------------
*/
  function SendSocket(id,data)
  {
    var obj = { ID:socketId, Data:data };
    socket.emit(id, obj)
  }

  function getValues()
  {
    var cSearchText = document.getElementById("input").value;
    document.getElementById("input").value = "";
    //get then reset .value incase user hit back button on result page

    if(cSearchText.length > 0)
    {
      socket.close();
//      window.location = "results.html?" + "search=" + cSearchText + "&dispensary=";
    }
  }
/*
--------------------------------------------
            Socket functions
--------------------------------------------
*/
  socket.on("connect", function(data)
  {
    socketId = socket.id;
  });
  //get unique ID when connected.
/*
--------------------------------------------
            Tag search bar instance
--------------------------------------------
*/
  $('#input').tagEditor({
      initialTags: [],
      delimiter: ',\t', 
      placeholder: 'Enter CannaGenie Tags...',
      forceLowercase: true,
      autocomplete: {
        delay:0 , 
        minLength: 1, 
        source: function(request, response) 
        {
          socket.emit("search",request.term, function (data)
          {
            response(data);
          });
        }
      }
  });

  $(document).keypress(function(event)
  {
    if(event.which == 13)
    {
      Recommend();
    }
  });
</script>
